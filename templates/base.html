<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %} - å«ç”Ÿå¥åº·å§”å‘˜ä¼šåå°ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a class="nav-title" href="{{ url_for('home') }}">å«ç”Ÿå¥åº·å§”å‘˜ä¼š</a>
            <div class="nav-links">
                <a href="{{ url_for('home') }}">é¦–é¡µ</a>
                <div class="dropdown">
                    <a class="dropbtn" href="{{ url_for('show_global') }}">ä¸–ç•Œç–«æƒ…æ’­æŠ¥</a>
                </div>
                <div class="dropdown">
                    <a class="dropbtn" href="{{ url_for('show_china') }}">ä¸­å›½ç–«æƒ…æ’­æŠ¥</a>
                </div>
                <div class="admin-entry">
                    <a href="{{ url_for('add_china_epidemic_data') }}" class="china-btn">ğŸ“ ä¸­å›½ç–«æƒ…æ•°æ®å½•å…¥</a>
                </div>
                <div class="admin-entry">
                    <a href="{{ url_for('add_global_epidemic_data') }}" class="global-btn">ğŸŒ å…¨çƒç–«æƒ…æ•°æ®å½•å…¥</a>
                </div>
            </div>
        </div>
    </nav>

    <main class="main-content">
        {% block content %}{% endblock %}
    </main>

    <div class="footer">
        Â© 2025 å«ç”Ÿå¥åº·å§”å‘˜ä¼š | æœ¬ç«™å†…å®¹ä»…ä¾›å‚è€ƒ
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const chinaBtn = document.querySelector('.china-btn');
            const globalBtn = document.querySelector('.global-btn');
            const otherLinks = document.querySelectorAll('.nav-links a:not(.china-btn):not(.global-btn)'); // é™¤äº†å½•å…¥æŒ‰é’®å¤–çš„å¯¼èˆªé“¾æ¥

            function activateButton(btnToActivate, btnToDeactivate) {
                btnToDeactivate.classList.remove('active');
                btnToActivate.classList.add('active');
                localStorage.setItem('activeBtn', btnToActivate.classList.contains('china-btn') ? 'china' : 'global');
            }

            // ç‚¹å‡»å½•å…¥æŒ‰é’®æ—¶ä¿å­˜çŠ¶æ€
            chinaBtn.addEventListener('click', function () {
                activateButton(chinaBtn, globalBtn);
            });

            globalBtn.addEventListener('click', function () {
                activateButton(globalBtn, chinaBtn);
            });

            // ç‚¹å‡»å…¶ä»–å¯¼èˆªé“¾æ¥æ—¶æ¸…é™¤çŠ¶æ€
            otherLinks.forEach(link => {
                link.addEventListener('click', function () {
                    localStorage.removeItem('activeBtn');
                });
            });

            // é¡µé¢åŠ è½½æ—¶æ¢å¤æ¿€æ´»çŠ¶æ€
            const activeBtn = localStorage.getItem('activeBtn');
            if (activeBtn === 'china') {
                chinaBtn.classList.add('active');
                globalBtn.classList.remove('active');
            } else if (activeBtn === 'global') {
                globalBtn.classList.add('active');
                chinaBtn.classList.remove('active');
            } else {
                // é»˜è®¤éƒ½ä¸æ¿€æ´»
                chinaBtn.classList.remove('active');
                globalBtn.classList.remove('active');
            }
        });
    </script>

</body>
</html>